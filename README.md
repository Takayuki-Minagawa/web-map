# WebMap

WebMap は Leaflet を用いて地図を表示し、地点情報の管理やルート検索が行えるシンプルな Web アプリケーションです。Python の軽量サーバーでローカル実行でき、外部サービスへの課金は発生しません。

## 基本仕様
- 専用のサーバー環境構築は不要で、付属の `server.py` を起動するだけで利用できます。
- 無料の OpenStreetMap／OSRM／Nominatim API を使用し、課金は発生しません。
- ブラウザ内で完結し、マーカー情報はローカルストレージに保存されます。

## 主な機能
- 地図をクリックした地点の緯度・経度と 1/2 メッシュ（9 桁）の地域メッシュコードを表示。
- 東京／大阪／京都へのジャンプボタンや住所検索による移動が可能。
- カスタムアイコン付きマーカーの追加・編集・削除、およびフィルター表示。
- マーカー一覧ダイアログから移動／編集／削除、JSON 形式でのエクスポート・インポートに対応。
- ルート選択ボタンで出発地／到着地を設定し、OSRM API で自動ルート計算（距離・所要時間を表示）。
- 距離・面積計測モードを切り替えて計測結果をパネルに表示。
- ブラウザの Geolocation API を利用した現在地表示（精度円付き）。
- html2canvas を使った地図領域の画像保存。

## 使い方
1. `python3 server.py` を実行してローカルサーバーを起動します（デフォルトで http://localhost:8000/ ）。ポートを変更したい場合は `python3 server.py 8080` のように数値を指定できます。
2. ブラウザが自動で開かない場合は、上記 URL を手動で開きます。
3. 必要に応じてマーカー追加やルート計算、距離計測などの機能を利用してください。

## 注意事項
- ルート検索および住所検索はインターネット接続が必要です。外部 API の利用制限に達した場合は時間をおいて再試行してください。
- 現在地取得は HTTPS 環境または localhost でのみ動作し、ブラウザからの位置情報許可が必要です。
- マーカーのエクスポート／インポートはブラウザのローカルストレージを前提としているため、別ブラウザ間で共有する場合は JSON ファイルを用いてください。
- 指定したポートが使用中の場合は、サーバーが自動的に空いている次のポートへ切り替わります（例: 8000 → 8001）。
